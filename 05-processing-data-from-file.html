<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Data Analysis and Visualization with Python for Social Scientists *alpha*: Processing data from a file</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav data"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Data Carpentry" src="assets/images/data-logo.svg"><abbr class="badge badge-light" title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback." style="background-color: #FFC700; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link" style="color: #383838">
            <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
            Alpha
          </a>
          <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/05-processing-data-from-file.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Data Analysis and Visualization with Python for Social Scientists *alpha*
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Data Analysis and Visualization with Python for Social Scientists *alpha*
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Analysis and Visualization with Python for Social Scientists *alpha*
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 28%" class="percentage">
    28%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 28%" aria-valuenow="28" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/05-processing-data-from-file.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction to Python</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-basics.html">2. Python basics</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-control-structures.html">3. Python control structures</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-reusable.html">4. Creating re-usable code</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Processing data from a file
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#reading-and-writing-datasets">Reading and Writing datasets</a></li>
<li><a href="#the-python-dictionary-structure">The Python dictionary structure</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-date-and-time.html">6. Dates and Time</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-json.html">7. Processing JSON data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-Pandas.html">8. Reading data from a file using Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-extracting-data.html">9. Extracting row and columns</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-aggregations.html">10. Data Aggregation using Pandas</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-joins.html">11. Joining Pandas Dataframes</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-long-and-wide.html">12. Wide and long data formats</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-matplotlib.html">13. Data visualisation using Matplotlib</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="14-sqlite.html">14. Accessing SQLite Databases</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Glossary</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-reusable.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-date-and-time.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-reusable.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Creating re-usable
        </a>
        <a class="chapter-link float-end" href="06-date-and-time.html" rel="next">
          Next: Dates and Time... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Processing data from a file</h1>
        <p>Last updated on 2023-05-04 |
        
        <a href="https://github.com/datacarpentry/python-socialsci/edit/main/episodes/05-processing-data-from-file.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can I read and write files?</li>
<li>What kind of data files can I read?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe a file handle</li>
<li>Use <code>with open() as</code> to open files for reading and
auto-close files</li>
<li>Create and open for writing or appending and auto-close files</li>
<li>Explain what is meant by a record</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="reading-and-writing-datasets"><h2 class="section-heading">Reading and Writing datasets<a class="anchor" aria-label="anchor" href="#reading-and-writing-datasets"></a>
</h2>
<hr class="half-width"><p>In all of our examples so far, we have directly allocated values to
variables in the code we have written before using the variables.</p>
<p>Python has an <code>input()</code> function which will ask for input
from the user, but for any large amounts of data this will be an
impractical way of collecting data.</p>
<p>The reality is that most of the data that your program uses will be
read from a file. Additionally, apart from when you are developing, most
of your program output will be written to a file.</p>
<p>In this episode we will look at how to read and write files of data
in Python.</p>
<p>There are in fact many different approaches to reading data files and
which one you choose will depend on such things as the size of the file
and the data format of the file.</p>
<p>In this episode we will;</p>
<ul><li>We will read a file which is in .csv (Comma Separated Values)
format.</li>
<li>We will use standard core Python functions to do this</li>
<li>We will read the file one line at a time ( line = record = row of a
table)</li>
<li>We will perform simple processing of the file data and print the
output</li>
<li>We will split the file into smaller files based on some
processing</li>
</ul><p>The file we will be using is only a small file (131 data records),
but the approach we are using will work for any size of file. Imagine
131M records. This is because we only process one record at a time so
the memory requirements of the programs will be very small. The larger
the file the more the processing time required.</p>
<p>Other approaches to reading files will typically expect to read the
whole file in one go. This can be efficient when you subsequently
process the data but it require large amounts of memory to hold the
entire file. We will look at this approach later when the look at the
Pandas package.</p>
<p>For our examples in this episode we are going to use the
SAFI_results.csv file. This is available for download <a href="data/SAFI_results.csv">here</a> and the description of the file is
available <a href="https://datacarpentry.org/socialsci-workshop/data/index.html" class="external-link">here</a>.</p>
<p>The code assumes that the file is in the same directory as your
notebook.</p>
<p>We will build up our programs in simple steps.</p>
<div class="section level3">
<h3 id="step-1---open-the-file-read-through-it-and-close-the-file">Step 1 - Open the file , read through it and close the file<a class="anchor" aria-label="anchor" href="#step-1---open-the-file-read-through-it-and-close-the-file"></a></h3>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> f:       <span class="co"># Open the file and assign it to a new variable which we call 'f'.</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                                          <span class="co"># The file will be read-only by default.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                                          <span class="co"># As long as the following code is indented, the file 'f' will be open.</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f:                        <span class="co"># We use a for loop to iterate through the file one line at a time.</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>        <span class="bu">print</span>(line)                       <span class="co"># We simply print the line.</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>        </span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"I'm on to something else now."</span>)    <span class="co"># When we are finished with this file, we stop indenting the code and the file is closed automatically.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Column1,A01_interview_date,A03_quest_no,A04_start,A05_end,A06_province,A07_district,A08_ward,A09_village,A11_years_farm,A12_agr_assoc,B11_remittance_money,B16_years_liv,B17_parents_liv,B18_sp_parents_liv,B19_grand_liv,B20_sp_grand_liv,B_no_membrs,C01_respondent_roof_type,C02_respondent_wall_type,C02_respondent_wall_type_other,C03_respondent_floor_type,C04_window_type,C05_buildings_in_compound,C06_rooms,C07_other_buildings,D_plots_count,E01_water_use,E17_no_enough_water,E19_period_use,E20_exper_other,E21_other_meth,E23_memb_assoc,E24_resp_assoc,E25_fees_water,E26_affect_conflicts,E_no_group_count,E_yes_group_count,F04_need_money,F05_money_source_other,F06_crops_contr,F08_emply_lab,F09_du_labour,F10_liv_owned_other,F12_poultry,F13_du_look_aftr_cows,F_liv_count,G01_no_meals,_members_count,_note,gps:Accuracy,gps:Altitude,gps:Latitude,gps:Longitude,instanceID

0,17/11/2016,1,2017-03-23T09:49:57.000Z,2017-04-02T17:29:08.000Z,Province1,District1,Ward2,Village2,11,no,no,4,no,yes,no,yes,3,grass,muddaub,,earth,no,1,1,no,2,no,,,,,,,,,2,,,,,no,no,,yes,no,1,2,3,,14,698,-19.11225943,33.48345609,uuid:ec241f2c-0609-46ed-b5e8-fe575f6cefef
...</code></pre>
</div>
<p>You can think of the file as being a list of strings. Each string in
the list is one complete line from the file.</p>
<p>If you look at the output, you can see that the first record in the
file is a header record containing column names. When we read a file in
this way, the column headings have no significance, the computer sees
them as another record in the file.</p>
</div>
<div class="section level3">
<h3 id="step-2---select-a-specific-column-from-the-records-in-the-file">Step 2 - Select a specific ‘column’ from the records in the
file<a class="anchor" aria-label="anchor" href="#step-2---select-a-specific-column-from-the-records-in-the-file"></a></h3>
<p>We know that the first record in the file is a header record and we
want to ignore it. To do this we call the <code>readline()</code> method
of the file handle f. We don’t need to assign the line that it will
return to a variable as we are not going to use it.</p>
<p>As we read the file the line variable is a string containing a
complete record. The fields or columns of the record are separated by
each other by “,” as it is a csv file.</p>
<p>As line is a string we can use the <code>split()</code> method to
convert it to a list of column values. We are specicically going to
select the column which is the 19th entry in the list (remember the list
index starts at 0). This refers to the C01_respondent_roof_type column.
We are going to examine the different roof types.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> f:  <span class="co"># Open the file and assign it to a variable called 'f'.</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>                                      <span class="co"># Indent the code to keep the file open. Stop indenting to close.</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    f.readline()                      <span class="co"># First line is a header so ignore it.</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>        <span class="bu">print</span>(line.split(<span class="st">","</span>)[<span class="dv">18</span>])    <span class="co"># Index 18, the 19th column is C01_respondent_roof_type.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">grass</span></span>
<span><span class="va">grass</span></span>
<span><span class="va">mabatisloping</span></span>
<span><span class="va">mabatisloping</span></span>
<span><span class="va">grass</span></span>
<span><span class="va">grass</span></span>
<span><span class="va">grass</span></span>
<span><span class="va">mabatisloping</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>Having a list of the roof types from all of the records is one thing,
but it is more likely that we would want a count of each type. By
scanning up and down the previous output, there appear to be 3 different
types, but we will play safe and assume there may be more.</p>
</div>
<div class="section level3">
<h3 id="step-3---how-many-of-each-different-roof-types-are-there">Step 3 - How many of each different roof types are there?<a class="anchor" aria-label="anchor" href="#step-3---how-many-of-each-different-roof-types-are-there"></a></h3>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> f:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    f.readline()</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    grass_roof <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    mabatisloping_roof <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    mabatipitched_roof <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>    roof_type_other <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co"># 4</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>        roof_type <span class="op">=</span> line.split(<span class="st">","</span>)[<span class="dv">18</span>]</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co"># 5    </span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>        <span class="cf">if</span> roof_type <span class="op">==</span> <span class="st">'grass'</span> :</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>            grass_roof <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>        <span class="cf">elif</span> roof_type <span class="op">==</span> <span class="st">'mabatisloping'</span> :</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>            mabatisloping_roof <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>        <span class="cf">elif</span> roof_type <span class="op">==</span> <span class="st">'mabatipitched'</span> :</span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>            mabatipitched_roof <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>        <span class="cf">else</span> :</span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>            roof_type_other <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="co">#6</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are "</span>, grass_roof, <span class="st">" grass roofs"</span>)</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are "</span>, mabatisloping_roof, <span class="st">" mabatisloping roofs"</span>)</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are "</span>, mabatipitched_roof, <span class="st">" mabatipitchedg roofs"</span>)</span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"There are "</span>, roof_type_other, <span class="st">" other roof types"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>There are 73 grass roofs
There are 48 mabatisloping roofs
There are 10 mabatipitchedg roofs
There are 0 other roof types</code></pre>
</div>
<p>What are we doing here?</p>
<ol style="list-style-type: decimal"><li>Open the file</li>
<li>Ignore the headerline</li>
<li>Initialise roof type variables to 0</li>
<li>Extract the C01_respondent_roof_type information from each
record</li>
<li>Increment the appropriate variable</li>
<li>Print out the results (we have stopped indenting so the file will be
closed)</li>
</ol><p>Instead of printing out the counts of the roof types, you may want to
extract all of one particular roof type to a separate file. Let us
assume we want all of the grass roof records to be written to a
file.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> fr:              <span class="co"># Note how we have used a new variable name, 'fr'.</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                                                   <span class="co"># The file is read-only by default.</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_grass_roof.csv"</span>, <span class="st">"w"</span>) <span class="im">as</span> fw:  <span class="co"># We are keeping 'fr' open so we indent.</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>                                                   <span class="co"># We specify a second parameter, "w" to make this file writeable.</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>                                                   <span class="co"># We use a different variable, 'fw'.</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> fr:</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co"># 2    </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>            <span class="cf">if</span> line.split(<span class="st">","</span>)[<span class="dv">18</span>] <span class="op">==</span> <span class="st">'grass'</span> :</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>                fw.write(line)</span></code></pre>
</div>
<p>What are we doing here?</p>
<ol style="list-style-type: decimal"><li>Open the files. Because there are now two files, each has its own
file handle: <code>fr</code> for the file we read and <code>fw</code>
for the file we are going to write. (They are just variable names so you
can use anything you like). For the file we are going to write to we use
<code>w</code> for the second parameter. If the file does not exist it
will be created. If it does exist, then the contents will be
overwritten. If we want to append to an existing file we can use
<code>a</code> as the second parameter.</li>
<li>Because we are just testing a specific field from the record to have
a certain value, we don’t need to put it into a variable first. If the
expression is True, then we use <code>write()</code> method to write the
complete line just as we read it to the output file.</li>
</ol><p>In this example we didn’t bother skipping the header line as it would
fail the test in the if statement. If we did want to include it we could
have added the line</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>fw.write(fr.readline())</span></code></pre>
</div>
<p>before the for loop</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise<a class="anchor" aria-label="anchor" href="#exercise"></a>
</h3>
<div class="callout-content">
<p>From the SAFI_results.csv file extract all of the records where the
<code>C01_respondent_roof_type</code> (index 18) has a value of
<code>'grass'</code> and the <code>C02_respondent_wall_type</code>
(index 19) has a value of <code>'muddaub'</code> and write them to a
file. Within the same program write all of the records where
<code>C01_respondent_roof_type</code> (index 18) has a value of
<code>'grass'</code> and the <code>C02_respondent_wall_type</code>
(index 19) has a value of <code>'burntbricks'</code> and write them to a
separate file. In both files include the header record.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> fr:</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>   <span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_grass_roof_muddaub.csv"</span>, <span class="st">"w"</span>) <span class="im">as</span> fw1:</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>      <span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_grass_roof_burntbricks.csv"</span>, <span class="st">"w"</span>) <span class="im">as</span> fw2:</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>          headerline <span class="op">=</span> fr.readline()</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>          fw1.write(headerline)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>          fw2.write(headerline)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>          <span class="cf">for</span> line <span class="kw">in</span> fr:</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>              <span class="cf">if</span> line.split(<span class="st">","</span>)[<span class="dv">18</span>] <span class="op">==</span> <span class="st">'grass'</span> :</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>                  <span class="cf">if</span> line.split(<span class="st">","</span>)[<span class="dv">19</span>] <span class="op">==</span> <span class="st">'muddaub'</span> :</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>                      fw1.write(line)</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>                  <span class="cf">if</span> line.split(<span class="st">","</span>)[<span class="dv">19</span>] <span class="op">==</span> <span class="st">'burntbricks'</span> :</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>                      fw2.write(line)    </span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In our example of printing the counts for the roof types, we assumed
that we knew what the likely roof types were. Although we did have an
<code>'other'</code> option to catch anything we missed. Had there been
any we would still be non the wiser as to what they represented. We were
able to decide on the specific roof types by manually scanning the list
of <code>C01_respondent_roof_type</code> values. This was only practical
because of the small file size. For a multi-million record file we could
not have done this.</p>
<p>We would like a way of creating a list of the different roof types
and at the same time counting them. We can do this by using not a Python
list structure, but a Python dictionary.</p>
</div>
</section><section id="the-python-dictionary-structure"><h2 class="section-heading">The Python dictionary structure<a class="anchor" aria-label="anchor" href="#the-python-dictionary-structure"></a>
</h2>
<hr class="half-width"><p>In Python a dictionary object maps keys to values. A dictionary can
hold any number of keys and values but a key cannot be duplicated.</p>
<p>The following code shows examples of creating a dictionary object and
manipulating keys and values.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># an empty dictionary</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>myDict <span class="op">=</span> {}</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># A dictionary with a single Key-value pair</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>personDict <span class="op">=</span> {<span class="st">'Name'</span> : <span class="st">'Peter'</span>}</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># I can add more about 'Peter' to the dictionary</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>personDict[<span class="st">'Location'</span>] <span class="op">=</span> <span class="st">'Manchester'</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co"># I can print all of the keys and values from the dictionary</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="bu">print</span>(personDict.items())</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co"># I can print all of the keys and values from the dictionary - and make it look a bit nicer</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> personDict:</span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a>    <span class="bu">print</span>(item, <span class="st">"="</span>, personDict[item])</span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co"># or all of the keys</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="bu">print</span>(personDict.keys())</span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="co"># or all of the values</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="bu">print</span>(personDict.values())</span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="co"># I can access the value for a given key</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a>x <span class="op">=</span> personDict[<span class="st">'Name'</span>]</span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a><span class="co"># I can change value for a given key</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a>personDict[<span class="st">'Name'</span>] <span class="op">=</span> <span class="st">"Fred"</span></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a><span class="bu">print</span>(personDict[<span class="st">'Name'</span>])</span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a><span class="co"># I can check if a key exists</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a>key <span class="op">=</span> <span class="st">'Name'</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a><span class="cf">if</span> key <span class="kw">in</span> personDict :</span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"already exists"</span>)</span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a><span class="cf">else</span> :</span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a>    personDict[key] <span class="op">=</span> <span class="st">"New value"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>dict_items([('Location', 'Manchester'), ('Name', 'Peter')])
Location = Manchester
Name = Peter
dict_keys(['Location', 'Name'])
dict_values(['Manchester', 'Peter'])
Peter
Fred
already exists</code></pre>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise<a class="anchor" aria-label="anchor" href="#exercise-1"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal"><li>Create a dictionary called <code>dict_roof_types</code> with initial
keys of <code>type1</code> and <code>type2</code> and give them values
of 1 and 3.</li>
<li>Add a third key <code>type3</code> with a value of 6.</li>
<li>Add code to check if a key of <code>type4</code> exists. If it does
not add it to the dictionary with a value of 1 if it does, increment its
value by 1</li>
<li>Add code to check if a key of <code>type2</code> exists. If it does
not add it to the dictionary with a value of 1 if it does, increment its
value by 1</li>
<li>Print out all of the keys and values from the dictionary</li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>dict_roof_types <span class="op">=</span> {<span class="st">'type1'</span> : <span class="dv">1</span> , <span class="st">'type2'</span> : <span class="dv">3</span>}</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>dict_roof_types[<span class="st">'type3'</span>] <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>key <span class="op">=</span> <span class="st">'type4'</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="cf">if</span> key <span class="kw">in</span> dict_roof_types :</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>    dict_roof_types[key] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="cf">else</span> :</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>    dict_roof_types[key] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co"># 4</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>key <span class="op">=</span> <span class="st">'type2'</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="cf">if</span> key <span class="kw">in</span> dict_roof_types :</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>    dict_roof_types[key] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="cf">else</span> :</span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>    dict_roof_types[key] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a> </span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="co"># 5</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> dict_roof_types:</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a>    <span class="bu">print</span>(item, <span class="st">"="</span>, dict_roof_types[item])</span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a>    </span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We are now in a position to re-write our count of roof types example
without knowing in advance what any of the roof types are.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span> (<span class="st">"SAFI_results.csv"</span>) <span class="im">as</span> f:</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    f.readline()</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    dict_roof_types <span class="op">=</span> {}</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co"># 4</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>        roof_type <span class="op">=</span> line.split(<span class="st">","</span>)[<span class="dv">18</span>]</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co"># 5    </span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>        <span class="cf">if</span> roof_type <span class="kw">in</span> dict_roof_types :</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>            dict_roof_types[roof_type] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>        <span class="cf">else</span> :</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>            dict_roof_types[roof_type] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="co"># 6</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> dict_roof_types:</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>    <span class="bu">print</span>(item, <span class="st">"="</span>, dict_roof_types[item])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">grass</span> <span class="op">=</span> <span class="fl">73</span></span>
<span><span class="va">mabatisloping</span> <span class="op">=</span> <span class="fl">48</span></span>
<span><span class="va">mabatipitched</span> <span class="op">=</span> <span class="fl">10</span></span></code></pre>
</div>
<p>What are we doing here?</p>
<ol style="list-style-type: decimal"><li>Open the file</li>
<li>Ignore the headerline</li>
<li>Create an empty dictionary</li>
<li>Extract the C01_respondent_roof_type information from each
record</li>
<li>Either add to the dictionary with a value of 1 or increment the
current value for the key by 1</li>
<li>Print out the contents of the dictionary (stopped indenting so file
is closed)</li>
</ol><p>You can apply the same approach to count values in any of the
fields/columns of the file.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Reading data from files is far more common than program ‘input’
requests or hard coding values</li>
<li>Python provides simple means of reading from a text file and writing
to a text file</li>
<li>Tabular data is commonly recorded in a ‘csv’ file</li>
<li>Text files like csv files can be thought of as being a list of
strings. Each string is a complete record</li>
<li>You can read and write a file one record at a time</li>
<li>Python has builtin functions to parse (split up) records into
individual tokens</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="04-reusable.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="06-date-and-time.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="04-reusable.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Creating re-usable
        </a>
        <a class="chapter-link float-end" href="06-date-and-time.html" rel="next">
          Next: Dates and Time... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/datacarpentry/python-socialsci/edit/main/episodes/05-processing-data-from-file.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/datacarpentry/python-socialsci/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/python-socialsci/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/python-socialsci/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.2" class="external-link">sandpaper (0.16.2)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.3" class="external-link">pegboard (0.7.3)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.github.io/python-socialsci/05-processing-data-from-file.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Processing data from a file",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.github.io/python-socialsci/05-processing-data-from-file.html",
  "identifier": "https://datacarpentry.github.io/python-socialsci/05-processing-data-from-file.html",
  "dateCreated": "2017-05-25",
  "dateModified": "2023-05-04",
  "datePublished": "2024-03-05"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

